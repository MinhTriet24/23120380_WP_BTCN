<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="PaintApp.Views.Pages.DrawingPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:PaintApp.Views.Pages"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:enums="using:PaintApp.Core.Enums"
    xmlns:helpers="using:PaintApp.Core.Helpers"
    mc:Ignorable="d">

    <Page.Resources>
        <helpers:ToolToBrushConverter x:Key="ToolHighlightConverter"/>
    </Page.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <CommandBar Grid.Row="0" DefaultLabelPosition="Right">
            <AppBarButton Icon="TouchPointer" Label="Cursor" Click="OnToolClicked" Tag="Cursor"/>
            <AppBarSeparator/>
            <AppBarButton Icon="Edit" Label="Line" Click="OnToolClicked" Tag="Line"
                          Background="{x:Bind ViewModel.CurrentTool, Mode=OneWay, Converter={StaticResource ToolHighlightConverter}, ConverterParameter='Line'}"/>
            <AppBarButton Icon="Accept" Label="Rectangle" Click="OnToolClicked" Tag="Rectangle"
                          Background="{x:Bind ViewModel.CurrentTool, Mode=OneWay, Converter={StaticResource ToolHighlightConverter}, ConverterParameter='Rectangle'}"/>
            <AppBarButton Icon="World" Label="Oval" Click="OnToolClicked" Tag="Oval"
                          Background="{x:Bind ViewModel.CurrentTool, Mode=OneWay, Converter={StaticResource ToolHighlightConverter}, ConverterParameter='Oval'}"/>
            <AppBarButton Icon="World" Label="Circle" Click="OnToolClicked" Tag="Circle"
                          Background="{x:Bind ViewModel.CurrentTool, Mode=OneWay, Converter={StaticResource ToolHighlightConverter}, ConverterParameter='Circle'}"/>
            <AppBarButton Icon="World" Label="Triangle" Click="OnToolClicked" Tag="Triangle"
                          Background="{x:Bind ViewModel.CurrentTool, Mode=OneWay, Converter={StaticResource ToolHighlightConverter}, ConverterParameter='Triangle'}"/>
            <AppBarButton Icon="World" Label="Polygon" Click="OnToolClicked" Tag="Polygon"
                          Background="{x:Bind ViewModel.CurrentTool, Mode=OneWay, Converter={StaticResource ToolHighlightConverter}, ConverterParameter='Polygon'}"/>

            <CommandBar.Content>
                <StackPanel Orientation="Horizontal" Spacing="10" Margin="10,5">
                    <TextBlock Text="Độ dày:" VerticalAlignment="Center"/>
                    <Slider Minimum="1" Maximum="10" Value="{x:Bind ViewModel.StrokeThickness, Mode=TwoWay}" Width="100"/>
                </StackPanel>
            </CommandBar.Content>
        </CommandBar>

        <ScrollViewer Grid.Row="1" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
            <Canvas x:Name="DrawingCanvas" 
                    Width="1000" Height="800" 
                    Background="White"
                    PointerPressed="OnCanvasPointerPressed"
                    PointerMoved="OnCanvasPointerMoved"
                    PointerReleased="OnCanvasPointerReleased">
            </Canvas>
        </ScrollViewer>
    </Grid>
</Page>
