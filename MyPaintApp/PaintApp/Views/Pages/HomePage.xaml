<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="PaintApp.Views.Pages.HomePage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:PaintApp.Views.Pages"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:entities="using:PaintApp_Data.Entities"
    xmlns:helpers="using:PaintApp.Core.Helpers"
    mc:Ignorable="d">

    <Page.Resources>
        <helpers:StringToImageSourceConverter x:Key="StringImgConverter"/>
    </Page.Resources>

    <Grid Padding="48">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <StackPanel Grid.Row="0" Margin="0,0,0,32">
            <TextBlock Text="Xin chào!" Style="{StaticResource TitleTextBlockStyle}"/>
            <TextBlock Text="Chào mừng bạn đến với ứng dụng vẽ vector hiện đại được thiết kế theo chuẩn Fluent Design của Windows 11. Hãy bắt đầu bằng cách chọn hoặc tạo Profile cá nhân để trải nghiệm không gian sáng tạo được tùy chỉnh riêng cho bạn. Tận dụng kho Template thông minh và các công cụ vẽ đa dạng để hiện thực hóa ý tưởng của bạn ngay hôm nay."
                       TextWrapping="WrapWholeWords"
                       Padding="10,10,10,10"/>
            <TextBlock Text="Chọn hồ sơ của bạn để bắt đầu vẽ" Style="{StaticResource BodyTextBlockStyle}" Opacity="0.6"/>
        </StackPanel>

        <GridView Grid.Row="1" 
                  ItemsSource="{x:Bind ViewModel.Profiles, Mode=OneWay}"
                  SelectionMode="Single">

            <GridView.ItemTemplate>
                <DataTemplate x:DataType="entities:UserProfile">
                    <Grid Width="200" Height="220" Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                          CornerRadius="8" Padding="16">
                        <StackPanel VerticalAlignment="Center" Spacing="12">
                            <PersonPicture DisplayName="{x:Bind UserName}"
                                           ProfilePicture="{x:Bind AvatarIcon, Converter={StaticResource StringImgConverter}}"
                                           Height="80"/>

                            <TextBlock Text="{x:Bind UserName}" 
                                       Style="{StaticResource SubtitleTextBlockStyle}" 
                                       HorizontalAlignment="Center"/>

                            <StackPanel Grid.Column="2" Orientation="Horizontal" Spacing="8">
                                <Button Content="Chọn &amp; Vẽ" Click="OnSelectProfileClicked" Tag="{x:Bind}"/>
                            </StackPanel>
                        </StackPanel>
                    </Grid>
                </DataTemplate>
            </GridView.ItemTemplate>
        </GridView>

        <Button Grid.Row="1" VerticalAlignment="Bottom" HorizontalAlignment="Right"
                Style="{StaticResource AccentButtonStyle}"
                Click="OnAddProfileClicked"
                Width="50" Height="50" CornerRadius="25">
            <FontIcon Glyph="&#xE710;"/>
        </Button>

        <ProgressRing Grid.Row="1" IsActive="{x:Bind ViewModel.IsLoading, Mode=OneWay}" 
                      Width="50" Height="50" HorizontalAlignment="Center" VerticalAlignment="Center"/>
    </Grid>
</Page>
